<ion-navbar *navbar primary>
  <ion-title>
    {{contacto.nombre}}
  </ion-title>
  <ion-buttons end primary>
    <button (click)="perfilcontacto(contacto)">
      <img *ngIf="contacto.foto" src="{{urlservice}}:9090/resouce/tuchat-{{contacto.usuario_id_esclavo}}.png" style="width:40px !important; height:40px !important; border-radius:50px;">
      <img *ngIf="!contacto.foto" src="img/code.png" style="width:40px !important; height:40px !important; border-radius:50px;">
    </button>
  </ion-buttons>
</ion-navbar>


<ion-toolbar [attr.primary]="isAndroid ? '' : null" no-border-top>
  <ion-segment [(ngModel)]="pantalla" [attr.light]="isAndroid ? '' : null">
    <ion-segment-button value="chat">
      chat
    </ion-segment-button>
    <ion-segment-button value="emiticones">
      emiticones
    </ion-segment-button>
  </ion-segment>
</ion-toolbar>

<ion-content>

  <div [ngSwitch]="pantalla">
    <ion-list *ngSwitchCase="'chat'">
      chat
    </ion-list>
    <ion-list *ngSwitchCase="'emiticones'">
      emiticones
    </ion-list>
  </div>

  <div *ngFor="#mensaje of mensajes">
    <p *ngIf="mensaje.usuario_id_rey === contacto.usuario_id_esclavo"
      style="text-align:left !important; margin-left:15px; margin-right:40px;" primary>
        <m class="globoChatEsclavo">{{mensaje.mensaje}}</m>
    </p>
    <p *ngIf="mensaje.usuario_id_rey === contacto.usuario_id_rey"
      style="text-align:right !important; margin-left:40px; margin-right:15px;" dark>
        <m class="globoChatRey">{{mensaje.mensaje}}</m>
    </p>
  </div>

</ion-content>

<ion-toolbar position="bottom" primary>
  <ion-textarea style="background:#ffffff; margin: 11px 30px 17px -4px !important;
    padding: 3px 3px 3px 3px !important;" placeholder="escribele a {{contacto.nombre}}" [(ngModel)]="mensaje"></ion-textarea>
  <ion-buttons primary end *ngIf="mensaje">
    <button (click)="enviarmensaje()">
      <ion-icon style="font-size: 2.8em !important; " name="ios-paper-plane"></ion-icon>
    </button>
  </ion-buttons>
</ion-toolbar>
